<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KYC 测试页面</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f7fa;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #303133;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ebeef5;
            border-radius: 6px;
        }
        
        .test-section h3 {
            color: #409EFF;
            margin-top: 0;
        }
        
        .test-button {
            background-color: #409EFF;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .test-button:hover {
            background-color: #337ecc;
        }
        
        .iframe-container {
            width: 100%;
            height: 600px;
            border: 1px solid #dcdfe6;
            border-radius: 6px;
            overflow: hidden;
            margin-top: 20px;
        }
        
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .device-simulator {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
        
        .device {
            flex: 1;
            text-align: center;
        }
        
        .device h4 {
            margin-bottom: 10px;
            color: #606266;
        }
        
        .device iframe {
            width: 375px;
            height: 667px;
            border: 2px solid #333;
            border-radius: 20px;
            background: #000;
            padding: 10px;
        }
        
        .features-list {
            list-style: none;
            padding: 0;
        }
        
        .features-list li {
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .features-list li:before {
            content: "✓";
            color: #67c23a;
            font-weight: bold;
            margin-right: 8px;
        }
        
        .status {
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
            background-color: #f0f9ff;
            border: 1px solid #b3d8ff;
            color: #409EFF;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔐 BITDU KYC H5 身份认证页面</h1>
        
        <div class="test-section">
            <h3>📱 功能特性</h3>
            <ul class="features-list">
                <li>支持搜索的国家/地区选择器，显示国旗图标</li>
                <li>多种证件类型支持：护照、身份证、驾驶证、永久居留证</li>
                <li>动态证件照片上传要求</li>
                <li>实时表单验证和错误提示</li>
                <li>移动端优化的响应式设计</li>
                <li>多步骤表单流程</li>
                <li>支持 WebView 集成</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h3>🚀 快速测试</h3>
            <button class="test-button" onclick="openKYC()">打开 KYC 页面</button>
            <button class="test-button" onclick="openKYCInFrame()">在框架中预览</button>
            <button class="test-button" onclick="simulateMobile()">移动端模拟</button>
            <button class="test-button" onclick="testWithData()">预填充数据测试</button>
        </div>
        
        <div class="test-section">
            <h3>📋 测试步骤</h3>
            <ol>
                <li><strong>步骤1：</strong>选择居住国家或地区（支持搜索）</li>
                <li><strong>步骤2：</strong>选择证件类型并填写个人信息</li>
                <li><strong>步骤3：</strong>根据证件类型上传相应照片</li>
                <li><strong>步骤4：</strong>确认信息并提交</li>
            </ol>
        </div>
        
        <div class="test-section">
            <h3>🔧 集成说明</h3>
            <p><strong>Android WebView 集成：</strong></p>
            <pre style="background: #f8f9fa; padding: 15px; border-radius: 4px; overflow-x: auto;">
// 在 Android 中加载 KYC 页面
webView.loadUrl("file:///android_asset/kyc-h5.html");

// 监听来自 H5 的消息
webView.addJavascriptInterface(new Object() {
    @JavascriptInterface
    public void onKYCSubmitSuccess(String data) {
        // 处理 KYC 提交成功
    }
}, "Android");
            </pre>
            
            <p><strong>JavaScript Bridge 通信：</strong></p>
            <pre style="background: #f8f9fa; padding: 15px; border-radius: 4px; overflow-x: auto;">
// H5 向原生发送消息
window.parent.postMessage({
    type: 'KYC_SUBMIT_SUCCESS',
    data: formData
}, '*');

// 原生向 H5 发送初始数据
window.postMessage({
    type: 'INIT_KYC_DATA',
    userData: { firstName: 'John', lastName: 'Doe' }
}, '*');
            </pre>
        </div>
        
        <div id="preview-container" style="display: none;">
            <div class="test-section">
                <h3>📱 页面预览</h3>
                <div class="iframe-container">
                    <iframe id="kyc-frame" src=""></iframe>
                </div>
            </div>
        </div>
        
        <div id="mobile-simulator" style="display: none;">
            <div class="test-section">
                <h3>📱 移动端模拟器</h3>
                <div class="device-simulator">
                    <div class="device">
                        <h4>iPhone (375x667)</h4>
                        <iframe src="kyc-h5.html"></iframe>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="status" id="status">
            ✅ KYC H5 页面已准备就绪，可以开始测试！
        </div>
    </div>

    <script>
        function openKYC() {
            window.open('kyc-h5.html', '_blank');
        }
        
        function openKYCInFrame() {
            const container = document.getElementById('preview-container');
            const frame = document.getElementById('kyc-frame');
            
            if (container.style.display === 'none') {
                container.style.display = 'block';
                frame.src = 'kyc-h5.html';
                updateStatus('📱 KYC 页面已在框架中加载');
            } else {
                container.style.display = 'none';
                updateStatus('✅ 框架预览已关闭');
            }
        }
        
        function simulateMobile() {
            const simulator = document.getElementById('mobile-simulator');
            
            if (simulator.style.display === 'none') {
                simulator.style.display = 'block';
                updateStatus('📱 移动端模拟器已启动');
            } else {
                simulator.style.display = 'none';
                updateStatus('✅ 移动端模拟器已关闭');
            }
        }
        
        function testWithData() {
            // 打开新窗口并发送测试数据
            const kycWindow = window.open('kyc-h5.html', '_blank');
            
            // 等待页面加载后发送数据
            setTimeout(() => {
                kycWindow.postMessage({
                    type: 'INIT_KYC_DATA',
                    userData: {
                        firstName: 'John',
                        lastName: 'Doe',
                        country: 'US'
                    }
                }, '*');
            }, 2000);
            
            updateStatus('🧪 已打开预填充数据的测试页面');
        }
        
        function updateStatus(message) {
            document.getElementById('status').innerHTML = message;
        }
        
        // 监听来自 KYC 页面的消息
        window.addEventListener('message', function(event) {
            if (event.data.type === 'KYC_SUBMIT_SUCCESS') {
                updateStatus('🎉 KYC 提交成功！数据：' + JSON.stringify(event.data.data, null, 2));
                console.log('KYC 提交数据：', event.data.data);
            }
        });
        
        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', function() {
            updateStatus('✅ KYC H5 页面已准备就绪，可以开始测试！');
        });
    </script>
</body>
</html>
